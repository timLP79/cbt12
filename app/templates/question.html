{% extends "base.html" %}

{% block title %}Assessment Question - CBT 12-Step{% endblock %}

{% block content %}
<div style="margin-bottom: 1rem; color: #666;">
    <strong>{{ progress }}</strong>
</div>

<div class="step-info">
    <p><strong>Question {{ current_index + 1 }}:</strong></p>
    <h3>{{ question.question_text }}</h3>
</div>

<form method="POST">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

    {% if question.question_type == 'multiple_choice' %}
    <!-- Multiple Choice Question -->
    {% for option in question.options %}
    <div style="margin-bottom: 1rem;">
        <label style="display: flex; align-items: center; cursor: pointer;">
            <input type="radio" name="selected_option" value="{{ option.option_id }}" required
                   style="margin-right: 0.5rem;">
            <span>{{ option.option_text }}</span>
        </label>
    </div>
    {% endfor %}
    {% else %}
    <!-- Written Response Question -->
    <label for="response_text">Your response:</label>
    <textarea id="response_text" name="response_text" rows="6" required
              style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 3px; font-size: 1rem; font-family: Arial, sans-serif;"></textarea>
    {% endif %}

    <div style="margin-top: 2rem;">
        <button type="submit">
            {% if current_index + 1 < total_questions %}
            Next Question â†’
            {% else %}
            Complete Assessment
            {% endif %}
        </button>
    </div>
</form>

<div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ddd;">
    <p style="color: #666; font-size: 0.9rem;">
        Progress: {{ current_index + 1 }} / {{ total_questions }} questions completed
    </p>
</div>
{% endblock %}