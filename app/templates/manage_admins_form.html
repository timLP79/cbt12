{% extends "base.html" %}

{% block title %}{{ action }} Admin - CBT 12-Step Assessment{% endblock %}

{% block content %}
<h2>{{ action }} Admin</h2>

<form method="POST" style="max-width: 600px;">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label for="admin_id">Admin ID: <span style="color: red;">*</span></label>
    <input type="text"
           id="admin_id"
           name="admin_id"
           value="{{ admin.admin_id if admin else '' }}"
           {% if admin %}readonly style="background: #e9ecef;" {% else %}required{% endif %}>
    {% if admin %}
    <p style="font-size: 0.9em; color: #6c757d; margin-top: 0.25rem;">
        Admin ID cannot be changed
    </p>
    {% endif %}

    <label for="first_name">First Name: <span style="color: red;">*</span></label>
    <input type="text"
           id="first_name"
           name="first_name"
           value="{{ admin.first_name if admin else '' }}"
           required>

    <label for="last_name">Last Name: <span style="color: red;">*</span></label>
    <input type="text"
           id="last_name"
           name="last_name"
           value="{{ admin.last_name if admin else '' }}"
           required>

    <label for="email">Email: <span style="color: red;">*</span></label>
    <input type="email"
           id="email"
           name="email"
           value="{{ admin.email if admin else '' }}"
           required>

    <label for="password">
        Password:
        {% if not admin %}<span style="color: red;">*</span>{% endif %}
    </label>
    <input type="password"
           id="password"
           name="password"
           placeholder="{% if admin %}Leave blank to keep current password{% else %}Min chars, uppercase + special char{% endif %}"
           {% if not admin %}required{% endif %}>
    {% if admin %}
    <p style="font-size: 0.9em; color: #6c757d; margin-top: 0.25rem;">
        Only fill in if you want to change the password
    </p>
    {% endif %}

    <label for="role">Role: <span style="color: red;">*</span></label>
    <select id="role" name="role" required style="padding: 0.5rem;">
        <option value="clinician" {% if admin and admin.role==
        'clinician' %}selected{% endif %}>Clinician</option>
        <option value="supervisor" {% if admin and admin.role==
        'supervisor' %}selected{% endif %}>Supervisor</option>
    </select>

    <div style="margin-top: 1.5rem;">
        <button type="submit"
                style="background: #28a745; color: white; padding: 0.75rem 1.5rem;">
            {{ action }} Admin
        </button>
        <a href="{{ url_for('manage.list_admins') }}"
           style="margin-left: 1rem; color: #6c757d;">
            Cancel
        </a>
    </div>
</form>

<div style="margin-top: 2rem;">
    <a href="{{ url_for('manage.list_admins') }}">‚Üê Back to Admin List</a>
</div>

{% endblock %}